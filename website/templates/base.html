<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
          crossorigin="anonymous"
        />
        <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          crossorigin="anonymous"
        />
    
        <title>{% block title %}Home{% endblock %}</title>
    </head>
    <body>
      <div class="topnav">
        <a class="active" href="/">Home</a>
        {% if not user.is_authenticated %}
        <a href="/register">Register</a>
        <a href="/login">Login</a>
        {% elif user.is_authenticated %}
        <a href="/upload">Upload video</a>
        <div class="topnav-right">
          <a href="/logout">Logout</a>
        </div>
        <a href="/myVideos">My Videos</a>
        {% else %}
        <a href="/about">About</a>
        {% endif %}
    </div>
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %} {% for category, message in messages %} {% if category ==
          'error' %}
          <div class="alert alert-danger alter-dismissable fade show" role="alert" id="divFlash">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" onClick="removeFlash()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          {% else %}
          <div class="alert alert-success alter-dismissable fade show" role="alert" id="divFlash">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" onClick="removeFlash()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          {% endif %} {% endfor %} {% endif %} {% endwith %}
        <div>
            {% block content %}{% endblock %}
        </div>
        <script>
          function deleteVideo(videoId) {
            fetch("/deleteVideo", {
              method: "POST",
              body: JSON.stringify({ videoId: videoId }),
            }).then((_res) => {
              window.location.href = "/";
            });
          }
        </script>
        <script>
          function deleteComment(commentId) {
            fetch("/deleteComment", {
              method: "POST",
              body: JSON.stringify({ commentId: commentId }),
            }).then((_res) => {
              window.location.href = "/";
            });
          }
        </script>
        <script>
          function removeFlash() {
            const element = document.getElementById("divFlash");
            element.remove();
          }
        </script>

    </body>
</html>